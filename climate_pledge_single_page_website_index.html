<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cool Enough to Care — Climate Action Pledge</title>
  <meta name="description" content="Take the climate action pledge — get a shareable certificate and join the public pledge wall." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1d1a;          /* deep teal */
      --brand:#20c997;       /* mint */
      --brand-2:#a0f0d0;     /* light mint */
      --ink:#0e1111;
      --ink-2:#1b2426;
      --card:#0f2622;
      --muted:#9fd2c3;
      --ring:#66e2ba;
    }
    html{scroll-behavior:smooth}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#0a1715 35%, #08100f);color:#eafff7}
    a{color:var(--brand)}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    header{position:sticky;top:0;backdrop-filter:blur(6px);background:linear-gradient(180deg,rgba(8,16,15,.9),rgba(8,16,15,.65));border-bottom:1px solid rgba(160,240,208,.15);z-index:30}
    header .bar{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
    .logo{display:flex;gap:10px;align-items:center;font-weight:800;letter-spacing:.3px}
    .logo-badge{width:34px;height:34px;border-radius:12px;background:radial-gradient(circle at 30% 30%, var(--brand), var(--brand-2));display:grid;place-items:center;color:#08201a;font-weight:900}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:12px 16px;border-radius:14px;border:1px solid rgba(160,240,208,.25);background:#0c1f1c;color:#dffff4;font-weight:600;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 0 rgba(32,201,151,.25) inset}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 24px rgba(32,201,151,.15),0 2px 0 rgba(32,201,151,.25) inset}
    .btn.primary{background:linear-gradient(180deg,var(--brand),#1fb889);color:#08201a;border-color:transparent}
    .hero{padding:64px 0 40px;display:grid;grid-template-columns:1.2fr .8fr;gap:32px}
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(160,240,208,.15);border:1px solid rgba(160,240,208,.25);font-weight:600;color:#bff8e5}
    .hero h1{font-size:clamp(32px,6vw,54px);line-height:1.05;margin:14px 0}
    .hero p{font-size:18px;opacity:.9}
    .hero-visual{position:relative;min-height:260px;border-radius:24px;background:radial-gradient(120% 140% at 10% 0%, rgba(32,201,151,.5), transparent 60%),linear-gradient(180deg,#0b1d1a,#0b1d1a);border:1px solid rgba(160,240,208,.15);overflow:hidden}
    .planet{position:absolute;right:-30px;bottom:-40px;width:340px;height:340px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #2be6af, #0da876 50%, #094c3c 65%);box-shadow:inset -26px -20px 48px rgba(0,0,0,.35), 0 0 60px rgba(32,201,151,.25)}
    .orbit{position:absolute;inset:24px;border:1px dashed rgba(160,240,208,.25);border-radius:999px;animation:spin 22s linear infinite}
    .spark{position:absolute;width:10px;height:10px;border-radius:50%;background:#fff;opacity:.7;filter:drop-shadow(0 0 10px #fff);animation:float 6s ease-in-out infinite}
    @keyframes spin{to{transform:rotate(1turn)}}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}

    .section{padding:56px 0}
    .card{background:var(--card);border:1px solid rgba(160,240,208,.18);border-radius:20px;padding:20px}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .kpi{background:#0c221f;border:1px solid rgba(160,240,208,.18);border-radius:18px;padding:16px}
    .kpi h3{margin:0;font-size:14px;opacity:.9}
    .kpi .num{font-weight:800;font-size:28px;margin-top:6px}

    .why{display:grid;grid-template-columns:1.1fr .9fr;gap:18px}

    form{display:grid;gap:14px}
    .field{display:grid;gap:6px}
    label{font-weight:600}
    input, select{background:#0a1c19;border:1px solid rgba(160,240,208,.25);border-radius:12px;padding:12px 12px;color:#eafff7}
    input:focus, select:focus, textarea:focus{outline:none;border-color:var(--ring);box-shadow:0 0 0 3px rgba(32,201,151,.15)}

    .themes{display:grid;gap:14px}
    .theme{border:1px solid rgba(160,240,208,.2);border-radius:16px;padding:12px}
    .theme h4{margin:4px 0 10px}

    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}

    .certificate{display:none;margin-top:16px}
    canvas{max-width:100%;border-radius:16px;border:1px solid rgba(160,240,208,.25)}

    table{width:100%;border-collapse:collapse;border-radius:16px;overflow:hidden}
    th,td{padding:12px;border-bottom:1px solid rgba(160,240,208,.12);text-align:left}
    th{background:#0c221f}
    tbody tr:hover{background:#0c201c}

    .muted{font-size:13px;opacity:.8}
    .note{background:#0a1c19;border:1px solid rgba(160,240,208,.25);padding:12px;border-radius:12px}
    .footer{font-size:13px;opacity:.75;padding:24px 0;border-top:1px solid rgba(160,240,208,.15)}

    .fadein{opacity:0;transform:translateY(8px);transition:opacity .6s ease, transform .6s ease}
    .fadein.show{opacity:1;transform:translateY(0)}

    @media (max-width: 920px){
      .hero{grid-template-columns:1fr;gap:24px}
      .kpis{grid-template-columns:1fr 1fr}
      .why{grid-template-columns:1fr}
      .grid-2{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr 1fr}
      .grid-4{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="container bar">
      <div class="logo">
        <div class="logo-badge">♻️</div>
        <div>Cool Enough to Care</div>
      </div>
      <nav>
        <a class="btn" href="#why">Why Action?</a>
        <a class="btn primary" href="#pledge">Take the Pledge</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="container hero">
    <div>
      <span class="badge">Together for a cooler planet ◦ Your pledge matters</span>
      <h1>Take the Climate Action Pledge</h1>
      <p>Be part of a growing movement of students and professionals who choose practical, everyday actions that reduce emissions and inspire others. Make your commitment today and receive a shareable certificate.</p>
      <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
        <a class="btn primary" href="#pledge">✨ Take the Pledge</a>
        <a class="btn" href="#wall">See the Pledge Wall</a>
      </div>
    </div>
    <div class="hero-visual">
      <div class="orbit"></div>
      <div class="planet"></div>
      <div class="spark" style="left:14%; top:16%"></div>
      <div class="spark" style="left:60%; top:22%; animation-delay:.8s"></div>
      <div class="spark" style="left:72%; top:58%; animation-delay:1.5s"></div>
    </div>
  </section>

  <!-- KPIs -->
  <section id="kpis" class="section">
    <div class="container">
      <h2 class="fadein">Live KPIs</h2>
      <p class="muted fadein">These update as new pledges arrive (demo uses local data or sheet sync if enabled).</p>
      <div class="kpis">
        <div class="kpi fadein"><h3>Target Pledges</h3><div class="num" id="kpi-target">1,000,000</div></div>
        <div class="kpi fadein"><h3>Achieved Pledges</h3><div class="num" id="kpi-achieved">0</div></div>
        <div class="kpi fadein"><h3>Students</h3><div class="num" id="kpi-students">0</div></div>
        <div class="kpi fadein"><h3>Working Professionals</h3><div class="num" id="kpi-pros">0</div></div>
        <div class="kpi fadein"><h3>Workshops</h3><div class="num" id="kpi-workshops">0</div></div>
        <div class="kpi fadein"><h3>Progress</h3><div class="num" id="kpi-progress">0.00%</div></div>
      </div>
    </div>
  </section>

  <!-- WHY -->
  <section id="why" class="section">
    <div class="container why">
      <div class="card fadein">
        <h3>Why take climate action?</h3>
        <p>Every individual choice adds up. By pledging, you commit to a handful of practical actions—like saving energy, reducing waste, and leading by example—that lower emissions and build momentum in your campus, workplace, and community. Millions of small actions create a powerful wave of change.</p>
        <p class="note">Your email & mobile help us validate entries and keep you engaged. We never show them publicly and never sell your data.</p>
      </div>
      <div class="card fadein">
        <h3>Certificate preview</h3>
        <p class="muted">After you submit, we instantly generate a personalized certificate you can download or share.</p>
        <canvas id="previewCanvas" width="900" height="600" aria-hidden="true"></canvas>
      </div>
    </div>
  </section>

  <!-- PLEDGE FORM -->
  <section id="pledge" class="section">
    <div class="container">
      <h2 class="fadein">Make your pledge</h2>
      <form id="pledgeForm" class="card fadein" autocomplete="on">
        <div class="grid-2">
          <div class="field">
            <label for="name">Name *</label>
            <input id="name" name="name" placeholder="Your full name" required />
          </div>
          <div class="field">
            <label for="email">Email *</label>
            <input id="email" name="email" type="email" placeholder="you@example.com" required />
          </div>
          <div class="field">
            <label for="mobile">Mobile Number *</label>
            <input id="mobile" name="mobile" type="tel" pattern="[0-9]{10}" placeholder="10-digit number" required />
            <span class="muted">We use your number only for validation. It’s never shown publicly.</span>
          </div>
          <div class="field">
            <label for="state">State</label>
            <select id="state" name="state">
              <option value="">Select…</option>
              <option>Andhra Pradesh</option><option>Assam</option><option>Bihar</option><option>Chhattisgarh</option><option>Delhi</option><option>Goa</option><option>Gujarat</option><option>Haryana</option><option>Himachal Pradesh</option><option>Jammu & Kashmir</option><option>Jharkhand</option><option>Karnataka</option><option>Kerala</option><option>Madhya Pradesh</option><option>Maharashtra</option><option>Manipur</option><option>Meghalaya</option><option>Mizoram</option><option>Nagaland</option><option>Odisha</option><option>Punjab</option><option>Rajasthan</option><option>Sikkim</option><option>Tamil Nadu</option><option>Telangana</option><option>Tripura</option><option>Uttar Pradesh</option><option>Uttarakhand</option><option>West Bengal</option>
            </select>
          </div>
          <div class="field">
            <label for="profile">Profile Type</label>
            <select id="profile" name="profile">
              <option>Student</option>
              <option>Working Professional</option>
              <option>Other</option>
            </select>
          </div>
          <div class="field">
            <label>
              <input id="workshop" type="checkbox" /> I attended/conducted a climate workshop
            </label>
            <span class="muted">Helps us count community learning events.</span>
          </div>
        </div>

        <div class="themes">
          <div class="theme">
            <h4>Theme 1 — Energy Savers</h4>
            <div class="grid-3">
              <label><input type="checkbox" name="c" value="LED & fan off"> Switch off lights/fans not in use</label>
              <label><input type="checkbox" name="c" value="Public transit/Carpool"> Use public transit/carpool twice a week</label>
              <label><input type="checkbox" name="c" value="Appliance efficiency"> Use AC at 24–26°C & maintain appliances</label>
            </div>
          </div>
          <div class="theme">
            <h4>Theme 2 — Waste Less</h4>
            <div class="grid-3">
              <label><input type="checkbox" name="c" value="Carry bottle"> Carry a reusable bottle & cup</label>
              <label><input type="checkbox" name="c" value="Segregate"> Segregate waste & compost organics</label>
              <label><input type="checkbox" name="c" value="Low-packaging"> Prefer low-packaging/local products</label>
            </div>
          </div>
          <div class="theme">
            <h4>Theme 3 — Community & Influence</h4>
            <div class="grid-3">
              <label><input type="checkbox" name="c" value="Share learnings"> Share climate tips with 3 friends</label>
              <label><input type="checkbox" name="c" value="Green club"> Join/start a green club/activity</label>
              <label><input type="checkbox" name="c" value="Speak up"> Ask your campus/workplace to adopt one greener practice</label>
            </div>
          </div>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <button class="btn primary" type="submit">Submit & Generate Certificate</button>
          <span class="muted">By submitting you agree to our <a href="#privacy">privacy note</a>.</span>
        </div>

        <div id="certWrap" class="certificate">
          <h3>Your Certificate</h3>
          <canvas id="certCanvas" width="1400" height="1000"></canvas>
          <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
            <button id="downloadBtn" class="btn">Download PNG</button>
            <button id="shareBtn" class="btn">Share</button>
          </div>
        </div>
      </form>

      <div id="privacy" class="note fadein" style="margin-top:12px">
        <strong>Privacy Note</strong><br>
        Mobile Number and Email are required for validation but never shown publicly. Data is used only for verification and engagement.
      </div>
    </div>
  </section>

  <!-- PUBLIC WALL -->
  <section id="wall" class="section">
    <div class="container">
      <h2 class="fadein">Public Pledge Wall</h2>
      <p class="muted fadein">Recent pledges appear here instantly. Emails & mobiles are never shown.</p>
      <div class="card fadein">
        <div style="display:flex;gap:8px;justify-content:space-between;align-items:center;margin-bottom:10px;flex-wrap:wrap">
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <select id="filterProfile" class="btn" style="padding:8px 12px">
              <option value="">All Profiles</option>
              <option>Student</option>
              <option>Working Professional</option>
              <option>Other</option>
            </select>
            <select id="filterState" class="btn" style="padding:8px 12px">
              <option value="">All States</option>
            </select>
          </div>
          <button id="resetDemo" class="btn" title="Clear demo data">Reset Demo Data</button>
        </div>
        <div style="overflow:auto">
          <table id="wallTable">
            <thead>
              <tr>
                <th>Pledge ID</th>
                <th>Name</th>
                <th>Date</th>
                <th>State</th>
                <th>Profile</th>
                <th>⭐ Love for Planet</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section class="container footer">
    <div>Made with ♻️ & care. Demo stores pledges in your browser (localStorage). Optional Google Sheet sync placeholder in code.</div>
  </section>

  <script>
    /********************
     * Simple data model
     ********************/
    const STORAGE_KEY = 'climate-pledges-v1';
    const TARGET_PLEDGES = 1000000; // static target

    /** Demo seed data (mock). Delete if connecting a backend. */
    const SEED = [
      {id: 'PLG-1001', name: 'Aarav K', date: '2025-08-10', state: 'Karnataka', profile: 'Student', hearts: 3, email:'hidden', mobile:'hidden', workshop:false},
      {id: 'PLG-1002', name: 'Meera S', date: '2025-08-11', state: 'Maharashtra', profile: 'Working Professional', hearts: 4, email:'hidden', mobile:'hidden', workshop:true},
      {id: 'PLG-1003', name: 'Rahul P', date: '2025-08-12', state: 'Tamil Nadu', profile: 'Student', hearts: 2, email:'hidden', mobile:'hidden', workshop:false},
    ];

    function loadData(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw){
        localStorage.setItem(STORAGE_KEY, JSON.stringify(SEED));
        return SEED;
      }
      try{ return JSON.parse(raw) }catch(e){ return [] }
    }
    function saveData(data){ localStorage.setItem(STORAGE_KEY, JSON.stringify(data)) }

    /********************
     * Helpers
     ********************/
    const qs = sel => document.querySelector(sel);
    const qsa = sel => Array.from(document.querySelectorAll(sel));
    const fmt = n => n.toLocaleString('en-IN');
    const todayISO = () => new Date().toISOString().slice(0,10);
    const uid = () => 'PLG-' + (Math.random().toString(36).slice(2,6) + Date.now().toString().slice(-5)).toUpperCase();
    const heartsFromCommitCount = (n) => n>=9?5 : n>=7?4 : n>=5?3 : n>=3?2 : 1;
    const heartString = (n) => '❤'.repeat(n);

    /********************
     * KPIs + Wall render
     ********************/
    let DATA = loadData();

    function renderKPIs(){
      const achieved = DATA.length;
      const students = DATA.filter(x=>x.profile==='Student').length;
      const pros = DATA.filter(x=>x.profile==='Working Professional').length;
      const workshops = DATA.filter(x=>x.workshop).length;
      qs('#kpi-target').textContent = fmt(TARGET_PLEDGES);
      qs('#kpi-achieved').textContent = fmt(achieved);
      qs('#kpi-students').textContent = fmt(students);
      qs('#kpi-pros').textContent = fmt(pros);
      qs('#kpi-workshops').textContent = fmt(workshops);
      const progress = (achieved / TARGET_PLEDGES) * 100;
      qs('#kpi-progress').textContent = progress.toFixed(2) + '%';
    }

    function stateList(){
      return Array.from(new Set(DATA.map(d=>d.state).filter(Boolean))).sort();
    }

    function renderStateFilter(){
      const sel = qs('#filterState');
      const states = stateList();
      sel.innerHTML = '<option value="">All States</option>' + states.map(s=>`<option>${s}</option>`).join('');
    }

    function renderWall(){
      const tbody = qs('#wallTable tbody');
      const pf = qs('#filterProfile').value;
      const sf = qs('#filterState').value;
      const rows = DATA
        .filter(d=>!pf || d.profile===pf)
        .filter(d=>!sf || d.state===sf)
        .sort((a,b)=>b.id.localeCompare(a.id));
      tbody.innerHTML = rows.map(r=>`
        <tr>
          <td>${r.id}</td>
          <td>${r.name}</td>
          <td>${r.date}</td>
          <td>${r.state||'-'}</td>
          <td>${r.profile}</td>
          <td>${'⭐'.repeat(r.hearts)} <span class="muted">(${r.hearts})</span></td>
        </tr>
      `).join('');
    }

    /********************
     * Certificate drawing
     ********************/
    const certOptions = {
      title: 'Cool Enough to Care!',
      org: 'Climate Action Pledge',
    };

    function drawCertificate(canvas, name, hearts){
      const ctx = canvas.getContext('2d');
      const W = canvas.width, H = canvas.height;

      // background
      const grad = ctx.createLinearGradient(0,0,W,H);
      grad.addColorStop(0,'#0b1d1a');
      grad.addColorStop(1,'#123a31');
      ctx.fillStyle = grad; ctx.fillRect(0,0,W,H);

      // border
      ctx.strokeStyle = '#20c997';
      ctx.lineWidth = 12;
      ctx.strokeRect(20,20,W-40,H-40);

      // heading
      ctx.fillStyle = '#a0f0d0';
      ctx.font = 'bold 64px Inter';
      ctx.textAlign = 'center';
      ctx.fillText(certOptions.title, W/2, 160);

      // sub
      ctx.fillStyle = '#eafff7';
      ctx.font = '28px Inter';
      ctx.fillText('This certifies that', W/2, 250);

      // name
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 72px Inter';
      ctx.fillText(name, W/2, 340);

      // line
      ctx.strokeStyle = 'rgba(160,240,208,.4)';
      ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(W/2-260, 360); ctx.lineTo(W/2+260, 360); ctx.stroke();

      // message
      ctx.fillStyle = '#dffff4';
      ctx.font = '26px Inter';
      ctx.fillText('pledged practical actions to protect our planet.', W/2, 410);

      // hearts rating
      const heart = '❤';
      ctx.font = 'bold 80px Inter';
      ctx.fillStyle = '#ff8fb0';
      ctx.fillText(heart.repeat(hearts), W/2, 510);
      ctx.fillStyle = '#bff8e5';
      ctx.font = '24px Inter';
      ctx.fillText(`Love for Planet: ${hearts}/5`, W/2, 550);

      // footer
      ctx.fillStyle = '#9fd2c3';
      ctx.font = '22px Inter';
      const date = new Date().toLocaleDateString('en-IN',{year:'numeric',month:'short',day:'numeric'});
      ctx.fillText(`${certOptions.org} • ${date}`, W/2, H-80);
    }

    function drawPreview(){
      const c = qs('#previewCanvas');
      drawCertificate(c, 'Your Name', 3);
    }

    /********************
     * Form handling
     ********************/
    qs('#pledgeForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const name = qs('#name').value.trim();
      const email = qs('#email').value.trim();
      const mobile = qs('#mobile').value.trim();
      const state = qs('#state').value;
      const profile = qs('#profile').value;
      const workshop = qs('#workshop').checked;
      const commitments = qsa('input[name="c"]:checked').map(x=>x.value);

      if(!name || !email || !mobile){
        alert('Please fill in Name, Email and Mobile.');
        return;
      }
      if(!/^\d{10}$/.test(mobile)){
        alert('Please enter a valid 10-digit mobile number.');
        return;
      }

      const hearts = heartsFromCommitCount(commitments.length);
      const entry = { id: uid(), name, date: todayISO(), state, profile, hearts, email, mobile, workshop };
      DATA = [entry, ...DATA];
      saveData(DATA);
      renderKPIs();
      renderWall();
      renderStateFilter();

      // certificate
      const cert = qs('#certCanvas');
      drawCertificate(cert, name, hearts);
      qs('#certWrap').style.display = 'block';
      cert.scrollIntoView({behavior:'smooth', block:'center'});

      // optional: send to Google Sheet (Apps Script web app)
      // fetch('YOUR_APPS_SCRIPT_WEBAPP_URL', { method:'POST', mode:'no-cors', body: JSON.stringify(entry) })
      //   .catch(console.warn);

      // reset form checkboxes only
      qsa('input[name="c"]').forEach(x=>x.checked=false);
    });

    // Download & Share
    qs('#downloadBtn').addEventListener('click', ()=>{
      const a = document.createElement('a');
      a.download = 'climate-pledge-certificate.png';
      a.href = qs('#certCanvas').toDataURL('image/png');
      a.click();
    });
    qs('#shareBtn').addEventListener('click', async ()=>{
      const dataUrl = qs('#certCanvas').toDataURL('image/png');
      const blob = await (await fetch(dataUrl)).blob();
      const files = [new File([blob], 'certificate.png', {type:'image/png'})];
      if(navigator.canShare && navigator.canShare({files})){
        await navigator.share({title:'My Climate Pledge', text:'I just took the Climate Action Pledge! #CoolEnoughToCare', files});
      } else {
        alert('Sharing not supported on this device. Please use Download instead.');
      }
    });

    // Filters
    qs('#filterProfile').addEventListener('change', renderWall);
    qs('#filterState').addEventListener('change', renderWall);

    // Reset demo
    qs('#resetDemo').addEventListener('click', ()=>{
      if(confirm('Reset demo data? This keeps only the sample entries.')){
        saveData(SEED.slice());
        DATA = loadData();
        renderKPIs();
        renderWall();
        renderStateFilter();
      }
    });

    // Intersection fade-ins
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('show') })
    },{threshold:.1});
    qsa('.fadein').forEach(el=>io.observe(el));

    // Init
    renderKPIs();
    renderWall();
    renderStateFilter();
    drawPreview();
  </script>
</body>
</html>
